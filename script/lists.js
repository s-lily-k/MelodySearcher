const scaleList = [
    "C2", "D2", "E2", "F2", "G2", "A2", "B2", // 0 ~ 6
    "C3", "D3", "E3", "F3", "G3", "A3", "B3", // 7 ~ 13
    "C4", "D4", "E4", "F4", "G4", "A4", "B4", // 14 ~ 20
    "C5", "D5", "E5", "F5", "G5", "A5", "B5", // 21 ~ 28
    "C6", // 29
];

const whiteKeys = ['C', 'D', 'E', 'F', 'G', 'A', 'B'];
const blackKeys = ['C#', 'D#', '', 'F#', 'G#', 'A#', ''];

const numOfScales = 30; // keyBindingsの数 // C2 ~ C6
const keyboardBindings = {
    '': 'C2',
    '': 'D2',
    '': 'E2',
    '': 'F2',
    '': 'G2',
    '': 'A2',
    '': 'B2',
    '': 'C#2',
    '': 'D#2',
    '': 'F#2',
    '': 'G#2',
    '': 'A#2',
    'A': 'C3',
    'S': 'D3',
    'D': 'E3',
    'F': 'F3',
    'G': 'G3',
    'H': 'A3',
    'J': 'B3',
    'W': 'C#3',
    'E': 'D#3',
    'T': 'F#3',
    'Y': 'G#3',
    'U': 'A#3',
    'K': 'C4',
    'L': 'D4',
    ';': 'E4',
    ':': 'F4',
    ']': 'G4',
    'O': 'C#4',
    'P': 'D#4',
    '[': 'F#4',
    '': 'G#4',
    '': 'A#4',
    '': 'C5',
    '': 'D5',
    '': 'E5',
    '': 'F5',
    '': 'G5',
    '': 'A5',
    '': 'B5',
    '': 'C#5',
    '': 'D#5',
    '': 'F#5',
    '': 'G#5',
    '': 'A#5',
    '': 'C6',
};


/* For Lyrics */
function adjustBrightness(rgb, percent) {
    return rgb.map((color) => Math.round(Math.min(Math.max(0, color * (1 + percent)), 255)));
}

let baseColors = [
    // // 1st loop: 50% // C1
    // [128, 0, 0], // red
    // [70, 0, 0], // darkred
    // [0, 0, 128], // blue
    // [0, 64, 0], // green
    // [0, 50, 0], // darkgreen
    // [128, 108, 0], // gold
    // [128, 83, 0], // orange
    // [25, 103, 25], // limegreen
    // [128, 96, 102], // pink
    // [128, 10, 74], // deeppink
    // [74, 56, 110], // mediumpurple
    // [64, 0, 64], // purple

    // 2nd loop: 60% // 1~2
    // [153, 0, 0],
    // [83, 0, 0],
    // [0, 0, 153],
    [0, 77, 0], // C2
    [0, 60, 0],
    [153, 129, 0],
    [153, 99, 0],
    [30, 123, 30],
    [153, 115, 122],
    [153, 12, 88],
    [88, 67, 131],
    [77, 0, 77],

    // 3rd loop: 70% // 2~3
    [179, 0, 0],
    [97, 0, 0],
    [0, 0, 179],
    [0, 90, 0],
    [0, 70, 0],
    [179, 150, 0],
    [179, 116, 0],
    [35, 144, 35],
    [179, 134, 142],
    [179, 14, 103],
    [103, 78, 153],
    [90, 0, 90],

    // 4th loop: 80% // 3~4
    [204, 0, 0],
    [111, 0, 0],
    [0, 0, 204],
    [0, 102, 0],
    [0, 80, 0],
    [204, 172, 0],
    [204, 132, 0],
    [40, 164, 40],
    [204, 154, 163],
    [204, 16, 118],
    [118, 90, 175],
    [102, 0, 102],

    // 5th loop: 90% // 4~5
    [230, 0, 0],
    [125, 0, 0],
    [0, 0, 230],
    [0, 115, 0],
    [0, 90, 0],
    [230, 194, 0],
    [230, 149, 0],
    [45, 185, 45],
    [230, 173, 183],
    [230, 18, 132],
    [132, 101, 197],
    [115, 0, 115],

    // 6th loop: 100% // 5~6
    [255, 0, 0], // A5
    [139, 0, 0], // A#5
    [0, 0, 255], // B5
    [0, 128, 0], // C6
    // [0, 100, 0],
    // [255, 215, 0],
    // [255, 165, 0],
    // [50, 205, 50],
    // [255, 192, 203],
    // [255, 20, 147],
    // [147, 112, 219],
    // [128, 0, 128]
];

// pitchArrayはpitchColorDictを作るため(だけ)の配列
// inputLyricsArray で入力された歌詞(配列)、
// inputPitchArrayで入力されたpitch列を保持する
let inputPitchArray = [];
let inputLyricsArray = "";

// inputLyricsArrayの改行indexを保持する
let newLineIndices = [];

let pitchArray = ["C2", "C#2", "D2", "D#2", "E2", "F2", "F#2", "G2", "G#2", "A2", "A#2", "B2",
    "C3", "C#3", "D3", "D#3", "E3", "F3", "F#3", "G3", "G#3", "A3", "A#3", "B3",
    "C4", "C#4", "D4", "D#4", "E4", "F4", "F#4", "G4", "G#4", "A4", "A#4", "B4",
    "C5", "C#5", "D5", "D#5", "E5", "F5", "F#5", "G5", "G#5", "A5", "A#5", "B5",
    "C6"];

let pitchColorDict = {};
for (let i = 0; i < baseColors.length; i++) {
    pitchColorDict[pitchArray[i]] = baseColors[i];
}